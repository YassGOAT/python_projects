{% extends 'base.html' %}

{% block content %}

<section class="game">
    <div class="top-bar">
        <div>Solde : <span>{{ balance }} €</span></div>
        <div>Mise : <span>{{ bet }} €</span></div>
    </div>

    <div class="table">
        <div class="hand dealer">
            <h3>Croupier</h3>
            <div class="cards">
                {% if not finished %}
                    {% if dealer_hand.cards %}
                        <div class="card">
                            <span class="value">{{ dealer_hand.cards[0].value }}</span>
                            <span class="suit">{{ dealer_hand.cards[0].suit }}</span>
                        </div>
                        <div class="card back">
                            <span class="value">?</span>
                        </div>
                    {% else %}
                        <p>Aucune carte</p>
                    {% endif %}
                {% else %}
                    {% for card in dealer_hand.cards %}
                        <div class="card">
                            <span class="value">{{ card.value }}</span>
                            <span class="suit">{{ card.suit }}</span>
                        </div>
                    {% endfor %}
                {% endif %}
            </div>
            {% if finished %}
                <p class="score">Score : {{ dealer_score }}</p>
            {% endif %}
        </div>

        <div class="hand player">
            <h3>Joueur</h3>
            <div class="cards">
                {% for card in player_hand.cards %}
                    <div class="card">
                        <span class="value">{{ card.value }}</span>
                        <span class="suit">{{ card.suit }}</span>
                    </div>
                {% endfor %}
            </div>
            <p class="score">Score : {{ player_score }}</p>
        </div>
    </div>

    {% if message %}
        <p class="message">{{ message }}</p>
    {% endif %}

    {% if not finished %}
        <div class="actions">
            <a class="btn primary" href="{{ url_for('hit') }}">Tirer</a>
            <a class="btn secondary" href="{{ url_for('stand') }}">Rester</a>
        </div>
    {% else %}
        <div class="actions">
            <a class="btn primary" href="{{ url_for('index') }}">Nouvelle manche</a>
        </div>
    {% endif %}
</section>

{% endblock %}
